{"version":3,"sources":["webpack:///src/views/Common/FullCodeNew/index.vue","webpack:///./src/views/Common/fullCode/index.vue?bae7","webpack:///./src/views/Common/FullCodeNew/index.vue?98f3","webpack:///./src/views/Common/fullCode/utils/codemirrorVueParse.js","webpack:///./src/views/Common/FullCodeNew/index.vue?e1cb","webpack:///./src/views/Common/fullCode/index.vue?af70","webpack:///./src/views/Common/FullScreenPreview/index.vue?3b0c","webpack:///./src/views/Common/FullCodeNew/index.vue?0039","webpack:///./src/views/Common/fullCode/setting.js","webpack:///src/views/Common/fullCode/index.vue","webpack:///./src/views/Common/FullCodeNew/index.vue","webpack:///./src/views/Common/FullCodeNew/index.vue?ec78","webpack:///./src/views/Common/FullCodeNew/index.vue?650d","webpack:///./src/views/Common/FullScreenPreview/index.vue","webpack:///src/views/Common/FullScreenPreview/index.vue","webpack:///./src/views/Common/FullScreenPreview/index.vue?0ebe","webpack:///./src/views/Common/FullScreenPreview/index.vue?7fe7","webpack:///./src/views/Common/FullCodeNew/setting.js","webpack:///./src/views/Common/fullCode/index.vue?2bad","webpack:///./src/views/Common/fullCode/index.vue","webpack:///./src/views/Common/fullCode/index.vue?bd19","webpack:///./src/views/Common/fullCode/index.vue?bef5"],"names":["components","codemirror","props","isshow","type","Boolean","default","codecontent","String","data","options","tabSize","styleActiveLine","lineNumbers","styleSelectedText","line","foldGutter","comment","gutters","highlightSelectionMatches","showToken","annotateScrollbar","mode","hintOptions","completeSingle","keyMap","matchBrackets","showCursorWhenSelecting","theme","autoCloseBrackets","extraKeys","Ctrl","mirror_code","commentLines","computed","compiled","component","compile","code","watch","handler","val","immediate","codeChange10E","disabledCodeMirror","mounted","$nextTick","methods","_this$$refs$editor","editor","$refs","doc","eachLine","text","trim","startsWith","push","lineNo","map","i","addLineClass","setGutterMarker","createMarker","marker","document","createElement","className","beforeChange","instance","change","disabledLines","from","to","includes","cancel","clipboardSuccess","pop","runCode","content","template","script","styles","parseComponent","render","staticRenderFns","defaultEchdata","_getdefaultEchdata","regex","match","res","fooStr","eval","alert","defaultTitle","_getdefaultTitle","initEchartStr","_getInitEchartFoo","myres","Vue","extend","echdata","Object","Array","titleText","eleId","Math","random","toString","substring","Date","now","setTimeout","initEchart","vm","$mount","componentPreview","innerHTML","appendChild","$el","CodeMirror","config","parserConfig","templateMode","styleMode","scriptMode","startState","templateState","styleState","scriptState","token","stream","state","skipToEnd","compiledComponent","previewComponent","componentKey","newval","frame","querySelector","contentWindow","open","write","on","cm","elt","console","log","curLine","getLine","handleBeforeCursorEnter","event","cursor","getCursor","preventDefault","codeChange13","codeChange","compiler","source","ComponentConstructor","codeChange2","el","message","codeChange3","compileToFunctions","outerHTML","codeChange4","codeChange5","h","codeChange6","Component","createComponent","codeChange7","MyComponent","style","codeChange8","templateCode","compiledTemplate","scriptCode","scriptDataMatch","scriptMethodsMatch","Function","styleCode","componentObj","codeChange9","codeChange10","msg","getElementById","echarts","$echart","myChart","init","option","grid","top","bottom","left","xAxis","yAxis","series","setOption","window","addEventListener","resize","codeChange10A","dataRegExp","dataMatch","dataContent","methodsRegExp","methodsMatch","methodsContent","codeChange10B","exec","vueOptions","str","codeChange10C","componentCtor","root","temp","exportObj","$children","$options","exports","codeChange10D","attrs","propsRegExp","initEchartRegExp","propsMatch","initEchartMatch","getdefaultEchdata","getInitEchartFoo","codeChange11","parsedComponent","codeChange12","componentName","componentCode","compOptions","_vm","this","_c","_self","staticClass","$event","$emit","_v","directives","name","rawName","value","expression","arg","ref","model","callback","$$v","_e","_t","staticStyle"],"mappings":"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","file":"assets/js/chunk-4102c6d9.b03706f5.js","sourcesContent":["<!--  -->\n<template>\n  <section class=\"fullScreen-page\" v-if=\"isshow\">\n    <aside class=\"leftPanel\">\n      <div class=\"panelHeader\">\n        <span class=\"btn\" @click=\"$emit('update:isshow', false)\">关闭弹窗</span>\n        <span class=\"btn\" v-clipboard:copy=\"mirror_code\" v-clipboard:success=\"clipboardSuccess\">复制代码</span>\n        <span class=\"btn\" @click=\"runCode\">运行代码</span>\n      </div>\n      <div class=\"codemirrorBox\">\n        <codemirror ref=\"editor\" id=\"editor\" v-model=\"mirror_code\" :options=\"options\" @beforeChange=\"beforeChange\"></codemirror>\n      </div>\n    </aside>\n    <main class=\"rightPanel\">\n      <div class=\"previewBox\" ref=\"componentPreview\">预览2</div>\n    </main>\n  </section>\n</template>\n\n<script>\n  import Vue from 'vue';\n  // import * as echarts from \"echarts\";\n  import { codemirror } from 'vue-codemirror';\n  import { compile, parseComponent } from 'vue-template-compiler';\n  import { pop } from '@/utils/pop/index.js';\n  // import compiler from \"vue-template-compiler\";\n  // 核心样式\n  import 'codemirror/lib/codemirror.css';\n  // 引入主题后还需要在 options 中指定主题才会生效\n  import 'codemirror/mode/javascript/javascript.js';\n  import 'codemirror/mode/css/css.js';\n  import 'codemirror/mode/vue/vue.js';\n  import './setting.js';\n  // import './utils/codemirrorVueParse.js'\n\n  export default {\n    components: {\n      codemirror\n    },\n    props: {\n      isshow: {\n        type: Boolean,\n        default: false\n      },\n      codecontent: {\n        // 编辑器的值\n        type: String,\n        default: 'hello world'\n      }\n    },\n    data() {\n      return {\n        // 默认配置\n        options: {\n          tabSize: 2, // tab\n          styleActiveLine: true, // 高亮选中行\n          lineNumbers: true, // 显示行号\n          styleSelectedText: true,\n          line: true,\n          foldGutter: true, // 块槽\n          // readOnly: true,\n          // readOnly: (line) => {\n          //   console.log('line', line);\n          //   // 判断当前行是否为单行注释（以 // 开头）\n          //   return /^\\s*\\/\\//.test(line.text);\n          // },\n          // 禁用注释行\n          comment: false,\n          gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'disabled-lines'],\n          highlightSelectionMatches: { showToken: /\\w/, annotateScrollbar: true }, // 可以启用该选项来突出显示当前选中的内容的所有实例\n          // mode: 'text/html',\n          // mode: 'text/javascript',\n          // mode: 'text/x-vue', // 这个vue模式，OK\n          // mode: 'htmlmixed',\n          mode: 'vue',\n          // hint.js options\n          hintOptions: {\n            // 当匹配只有一项的时候是否自动补全\n            completeSingle: false\n          },\n          // 快捷键 可提供三种模式 sublime、emacs、vim\n          keyMap: 'sublime',\n          matchBrackets: true,\n          showCursorWhenSelecting: true,\n          theme: 'base16-light', // 主题  'monokai' 'solarized light'  'base16-light'\n          autoCloseBrackets: true, //自动补全括号\n          extraKeys: { Ctrl: 'autocomplete' } // 可以用于为编辑器指定额外的键绑定，以及keyMap定义的键绑定\n        },\n        mirror_code: '',\n        commentLines: [] // 含有注释的行号\n      };\n    },\n    computed: {\n      compiled() {\n        const component = compile(this.codecontent).code;\n        return component;\n      }\n    },\n    watch: {\n      codecontent: {\n        handler(val) {\n          this.mirror_code = val;\n        },\n        immediate: true\n      },\n      mirror_code: {\n        handler(val) {\n          this.codeChange10E(val);\n          this.disabledCodeMirror();\n        },\n        immediate: true\n      }\n    },\n    mounted() {\n      this.$nextTick(() => {\n        this.disabledCodeMirror();\n      });\n    },\n    methods: {\n      disabledCodeMirror() {\n        const editor = this.$refs.editor?.codemirror;\n        if (!editor) return;\n        const commentLines = [];\n        editor.doc.eachLine(line => {\n          if (line.text.trim().startsWith('//tag')) {\n            commentLines.push(line.lineNo());\n            // commentLines.push(line.lineNo() - 1);\n          }\n        });\n        this.commentLines = commentLines;\n        // console.log('Comment lines:', commentLines); // 获取所有的注释行\n        commentLines.map(i => {\n          editor.addLineClass(i, 'background', 'disabled-line');\n          editor.setGutterMarker(i, 'disabled-lines', this.createMarker());\n        });\n        //\n        // const editor = this.$refs.editor.codemirror;\n        // const disabledLines = [2, 6, 8]; // 禁用第 2、5、8 行\n        // editor.addLineClass(2, 'background', 'disabled-line');\n        // editor.addLineClass(6, 'background', 'disabled-line');\n        // editor.addLineClass(8, 'background', 'disabled-line');\n        // editor.setGutterMarker(2, 'disabled-lines', this.createMarker());\n        // editor.setGutterMarker(6, 'disabled-lines', this.createMarker());\n        // editor.setGutterMarker(8, 'disabled-lines', this.createMarker());\n      },\n      createMarker() {\n        const marker = document.createElement('div');\n        marker.className = 'disabled-line-marker';\n        return marker;\n      },\n      beforeChange(instance, change) {\n        // const disabledLines = [2, 6, 8]; // 禁用第 2、6、8 行\n        const disabledLines = this.commentLines; // 禁用 xxx 行\n        const from = change.from.line;\n        const to = change.to.line;\n        for (let i = from; i <= to; i++) {\n          //   const curLine = instance.doc.getLine(i); // 获取当前行的内容\n          //   console.log('curLine', curLine);\n          if (disabledLines.includes(i)) {\n            change.cancel();\n            break;\n          }\n        }\n      },\n      // 复制\n      clipboardSuccess() {\n        pop();\n      },\n      runCode() {},\n      codeChange10E(content) {\n        const { template, script, styles } = parseComponent(content);\n        const { render, staticRenderFns } = compile(template.content);\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n\n        // echart默认数据\n        let defaultEchdata = {} || [];\n        _getdefaultEchdata();\n        function _getdefaultEchdata() {\n          const regex = /\\/\\/tag1-start([\\s\\S]*?)\\/\\/tag1-end/;\n          const match = content.match(regex);\n          if (match) {\n            const res = match[1];\n            const fooStr = `\n               function foo(){\n                  ${res}\n                  return defaultEchdata;\n                }\n              `;\n            defaultEchdata = eval(`(${fooStr})`)();\n          } else {\n            alert('加载失败， 刷新页面后重试');\n          }\n        }\n\n        // 标题\n        let defaultTitle = '';\n        _getdefaultTitle();\n        function _getdefaultTitle() {\n          const regex = /\\/\\/tag1B-start([\\s\\S]*?)\\/\\/tag1B-end/;\n          const match = content.match(regex);\n          if (match) {\n            const res = match[1];\n            const fooStr = `\n               function foo(){\n                  ${res}\n                  return defaultTitle;\n                }\n              `;\n            defaultTitle = eval(`(${fooStr})`)();\n          } else {\n            alert('加载失败， 刷新页面后重试');\n          }\n        }\n\n        // echart 初始化\n        let initEchartStr = '';\n        _getInitEchartFoo();\n        function _getInitEchartFoo() {\n          const regex = /\\/\\/tag2-start([\\s\\S]*?)\\/\\/tag2-end/;\n          const match = content.match(regex);\n          if (match) {\n            const res = match[1];\n            let myres = `\n                const echarts = this.$echarts;\n                ${res.trim()}\n            `;\n            initEchartStr = myres;\n          } else {\n            alert('加载失败， 刷新页面后重试');\n          }\n        }\n\n        let component = Vue.extend({\n          template: template.content,\n          props: {\n            echdata: {\n              type: [Object, Array],\n              default: () => defaultEchdata\n            },\n            titleText: {\n              type: String,\n              default: defaultTitle\n            }\n          },\n          data() {\n            return {\n              eleId: `eleId_${Math.random()\n                .toString()\n                .substring(3, 6) + Date.now().toString(36)}`\n            };\n          },\n          mounted() {\n            // this.$nextTick(() => {\n            //   this.initEchart();\n            // });\n            setTimeout(() => {\n              this.initEchart();\n            }, 1000);\n          },\n          methods: {\n            initEchart() {\n              try {\n                eval(initEchartStr);\n              } catch {\n                alert('请刷新页面重试');\n              }\n            }\n          }\n        });\n        let vm = new component().$mount();\n        // console.log('vm', vm);\n        this.$nextTick(() => {\n          this.$refs.componentPreview.innerHTML = '';\n          this.$refs.componentPreview.appendChild(vm.$el);\n        });\n      }\n      //\n    }\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .fullScreen-page {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 99;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.2);\n    background-color: #fff;\n    display: flex;\n    padding: 10px;\n    box-sizing: border-box;\n    // 左\n    .leftPanel {\n      flex: 1;\n      margin: 10px;\n      padding: 10px;\n      border: 1px solid #efeff5;\n      display: flex;\n      flex-direction: column;\n      .panelHeader {\n        display: flex;\n        justify-content: flex-end;\n        .btn {\n          margin-left: 15px;\n          padding: 6px 10px;\n          border: 1px solid #adb0b8;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: all 0.3s;\n          &:hover {\n            color: #5e7ce0;\n            border-color: #5e7ce0;\n          }\n        }\n      }\n      .codemirrorBox {\n        margin-top: 15px;\n        flex: 1;\n        overflow: auto;\n        // height: calc(100% - 40px);\n        ::v-deep .vue-codemirror {\n          height: 100%;\n        }\n        ::v-deep .CodeMirror {\n          height: 100%;\n        }\n      }\n    }\n    // 右\n    .rightPanel {\n      flex: 1;\n      margin: 10px;\n      padding: 10px;\n      border: 1px solid #efeff5;\n      .previewBox {\n        height: 400px;\n        padding: 15px;\n        // height: 100%;\n        background-color: #051c4b;\n      }\n    }\n  }\n</style>\n\n<style>\n  .echart-unit {\n    height: 100%;\n  }\n</style>\n<style>\n  .disabled-line {\n    background-color: #f7f7f7 !important;\n    color: #ccc !important;\n    pointer-events: none !important;\n  }\n  .disabled-line-marker {\n    background-color: #ccc;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    margin-top: 2px;\n  }\n</style>\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=83f4f712&prod&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=2&id=4852915f&prod&lang=css\"","// CodeMirror 定义 Vue 单文件的语言模式需要使用 `defineMode` 方法。这个方法用于定义一个新的语言模式，它的第一个参数是模式名称，第二个参数是一个返回 `TokenStream` 的函数，这个函数用于解析和高亮代码。\n\n// 下面是一个定义 Vue 单文件语言模式的示例代码：\nimport * as CodeMirror from \"codemirror/lib/codemirror\";\nimport \"codemirror/mode/vue/vue.js\";\nCodeMirror.defineMode(\"vue2\", function(config, parserConfig) {\n  // 定义模板解析器\n  const templateMode = CodeMirror.getMode({}, \"text/html\");\n  // 定义样式解析器\n  const styleMode = CodeMirror.getMode({}, \"text/css\");\n  // 定义脚本解析器\n  const scriptMode = CodeMirror.getMode({}, \"javascript\");\n\n  return {\n    startState: function() {\n      return {\n        templateState: templateMode.startState(),\n        styleState: styleMode.startState(),\n        scriptState: scriptMode.startState()\n      };\n    },\n    token: function(stream, state) {\n      if (stream.match(/^<template>/)) {\n        state.templateState = templateMode.startState();\n        return \"tag\";\n      } else if (stream.match(/^<\\/template>/)) {\n        state.templateState = null;\n        return \"tag\";\n      } else if (stream.match(/^<style(\\s|>)/)) {\n        state.styleState = styleMode.startState();\n        return \"tag\";\n      } else if (stream.match(/^<\\/style(\\s|>)/)) {\n        state.styleState = null;\n        return \"tag\";\n      } else if (stream.match(/^<script(\\s|>)/)) {\n        state.scriptState = scriptMode.startState();\n        return \"tag\";\n      } else if (stream.match(/^<\\/script(\\s|>)/)) {\n        state.scriptState = null;\n        return \"tag\";\n      } else if (state.templateState) {\n        return templateMode.token(stream, state.templateState);\n      } else if (state.styleState) {\n        return styleMode.token(stream, state.styleState);\n      } else if (state.scriptState) {\n        return scriptMode.token(stream, state.scriptState);\n      } else {\n        stream.skipToEnd();\n        return null;\n      }\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/vue2\", \"vue2\");\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4852915f&prod&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=2&id=83f4f712&prod&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=459172ec&prod&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=4852915f&prod&lang=css\"","import 'codemirror/lib/codemirror.css';\n// require active-line.js\nimport 'codemirror/addon/selection/active-line.js';\n// styleSelectedText\nimport 'codemirror/addon/selection/mark-selection.js';\n// hint\nimport 'codemirror/addon/hint/show-hint.js';\nimport 'codemirror/addon/hint/sql-hint.js';\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/hint/javascript-hint.js';\n// highlightSelectionMatches\nimport 'codemirror/addon/scroll/annotatescrollbar.js';\nimport 'codemirror/addon/search/matchesonscrollbar.js';\nimport 'codemirror/addon/search/match-highlighter.js';\n// keyMap\nimport 'codemirror/mode/clike/clike.js';\nimport 'codemirror/mode/sql/sql.js';\nimport 'codemirror/addon/edit/matchbrackets.js';\nimport 'codemirror/addon/comment/comment.js';\nimport 'codemirror/addon/dialog/dialog.js';\nimport 'codemirror/addon/dialog/dialog.css';\nimport 'codemirror/addon/search/searchcursor.js';\nimport 'codemirror/addon/search/search.js';\nimport 'codemirror/keymap/sublime.js';\n// foldGutter\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/brace-fold.js';\nimport 'codemirror/addon/fold/comment-fold.js';\nimport 'codemirror/addon/fold/foldcode.js';\nimport 'codemirror/addon/fold/foldgutter.js';\nimport 'codemirror/addon/fold/indent-fold.js';\nimport 'codemirror/addon/fold/markdown-fold.js';\nimport 'codemirror/addon/fold/xml-fold.js';\n// 编辑的主题文件\nimport 'codemirror/theme/monokai.css';\nimport 'codemirror/theme/base16-light.css';\n\n// new\n// 代码括号自动补全\nimport 'codemirror/addon/edit/closebrackets.js';\n","<!--  -->\n<template>\n  <section class=\"fullScreen-page\" v-if=\"isshow\">\n    <aside class=\"leftPanel\">\n      <div class=\"panelHeader\">\n        <span class=\"btn\" @click=\"$emit('update:isshow', false)\">关闭弹窗</span>\n        <span class=\"btn\">复制代码</span>\n        <span class=\"btn\" @click=\"runCode\">运行代码</span>\n      </div>\n      <div class=\"codemirrorBox\">\n        <codemirror\n          ref=\"editor\"\n          id=\"editor\"\n          v-model=\"mirror_code\"\n          :options=\"options\"\n          @beforeChange=\"beforeChange\"\n          @beforeCursorEnter=\"handleBeforeCursorEnter\"\n        ></codemirror>\n      </div>\n    </aside>\n    <main class=\"rightPanel\">\n      <!-- <div class=\"preview\" v-html=\"compiled\"></div>\n      <iframe id=\"frame\" frameborder=\"0\"></iframe> -->\n      <div id=\"preview\">预览</div>\n      <!-- <div v-if=\"compiledComponent\">${compiledComponent}</div> -->\n      <!-- <my-component></my-component> -->\n      <div style=\"height: 300px\" ref=\"componentPreview\">预览2</div>\n      <!-- <component :is=\"previewComponent\" :key=\"componentKey\"></component>\n      <dynamic-component /> -->\n    </main>\n  </section>\n</template>\n\n<script>\n  import Vue from 'vue';\n  import * as echarts from 'echarts';\n  import { codemirror } from 'vue-codemirror';\n  // import VueCodeMirror from 'vue-codemirror'; // 这种方式引入 ,组件注册见下方。\n  // import * as CodeMirror from 'codemirror/lib/codemirror'\n  import { compile, parseComponent, parse, compileToFunctions, createComponent } from 'vue-template-compiler';\n  import compiler from 'vue-template-compiler';\n  // 核心样式\n  import 'codemirror/lib/codemirror.css';\n  // 引入主题后还需要在 options 中指定主题才会生效\n  import 'codemirror/mode/javascript/javascript.js';\n  import 'codemirror/mode/css/css.js';\n  import 'codemirror/mode/vue/vue.js';\n  import './setting.js';\n  import './utils/codemirrorVueParse.js';\n  // import './mode/vueMode.js';\n\n  export default {\n    components: {\n      codemirror\n      // codemirror: VueCodemirror.codemirror\n    },\n    props: {\n      isshow: {\n        type: Boolean,\n        default: false\n      },\n      codecontent: {\n        // 编辑器的值\n        type: String,\n        default: 'hello world'\n      }\n    },\n    data() {\n      return {\n        code: 'Hello World!', // 编辑器绑定的值\n        // 默认配置\n        options: {\n          tabSize: 2, // tab\n          styleActiveLine: true, // 高亮选中行\n          lineNumbers: true, // 显示行号\n          styleSelectedText: true,\n          line: true,\n          foldGutter: true, // 块槽\n          // readOnly: true,\n          // readOnly: (line) => {\n          //   console.log('line', line);\n          //   // 判断当前行是否为单行注释（以 // 开头）\n          //   return /^\\s*\\/\\//.test(line.text);\n          // },\n          // 禁用注释行\n          comment: false,\n          gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'disabled-lines'],\n          highlightSelectionMatches: { showToken: /\\w/, annotateScrollbar: true }, // 可以启用该选项来突出显示当前选中的内容的所有实例\n          // mode: 'text/html',\n          // mode: 'text/javascript',\n          // mode: 'text/x-vue', // 这个vue模式，OK\n          // mode: 'htmlmixed',\n          mode: 'vue',\n          // hint.js options\n          hintOptions: {\n            // 当匹配只有一项的时候是否自动补全\n            completeSingle: false\n          },\n          // 快捷键 可提供三种模式 sublime、emacs、vim\n          keyMap: 'sublime',\n          matchBrackets: true,\n          showCursorWhenSelecting: true,\n          theme: 'base16-light', // 主题  'monokai' 'solarized light'  'base16-light'\n          autoCloseBrackets: true, //自动补全括号\n          extraKeys: { Ctrl: 'autocomplete' } // 可以用于为编辑器指定额外的键绑定，以及keyMap定义的键绑定\n        },\n        mirror_code: '',\n        compiledComponent: null,\n        // 11\n        previewComponent: null,\n        componentKey: 0 // 动态组件的键值\n      };\n    },\n    computed: {\n      compiled() {\n        const component = compile(this.codecontent).code;\n        return component;\n      }\n    },\n    watch: {\n      code: {\n        handler: function(newval) {\n          const frame = document.querySelector('#frame');\n          frame.contentWindow.document.open();\n          frame.contentWindow.document.write(newval);\n        }\n      },\n      codecontent: {\n        handler(val) {\n          this.mirror_code = val;\n          // this.codeChange10E(val);\n        },\n        immediate: true\n      },\n      mirror_code: {\n        handler(val) {\n          this.codeChange10E(val);\n        },\n        immediate: true\n      }\n    },\n    mounted() {\n      this.$nextTick(() => {\n        this.disabledCodeMirror();\n      });\n    },\n    methods: {\n      disabledCodeMirror() {\n        const editor = this.$refs.editor.codemirror;\n        const disabledLines = [2, 5, 8]; // 禁用第 2、5、8 行\n        editor.addLineClass(2, 'background', 'disabled-line');\n        editor.addLineClass(5, 'background', 'disabled-line');\n        editor.addLineClass(8, 'background', 'disabled-line');\n        editor.setGutterMarker(2, 'disabled-lines', this.createMarker());\n        editor.setGutterMarker(5, 'disabled-lines', this.createMarker());\n        editor.setGutterMarker(8, 'disabled-lines', this.createMarker());\n        //\n        editor.on('renderLine', (cm, line, elt) => {\n          const text = line.text.trim();\n          if (text.startsWith('//')) {\n            // console.log('cm', cm);\n            // console.log('cm.addLineClass', cm.addLineClass);\n            // console.log(line, elt, text);\n            // const handle = cm.getLineHandle(line.lineNo());\n            // cm.removeLineClass(handle, 'background', 'cm-comment');\n            // cm.addLineClass(handle, 'background', 'cm-comment');\n            // line && cm.addLineClass(line, 'background', 'cm-comment');\n            // editor.addLineClass(line, 'start', 'cm-comment');\n          }\n        });\n      },\n      createMarker() {\n        const marker = document.createElement('div');\n        marker.className = 'disabled-line-marker';\n        return marker;\n      },\n      beforeChange(instance, change) {\n        console.log('instance', instance);\n        console.log('change', change);\n\n        const disabledLines = [2, 5, 8]; // 禁用第 2、5、8 行\n        const from = change.from.line;\n        const to = change.to.line;\n        for (let i = from; i <= to; i++) {\n          const curLine = instance.doc.getLine(i); // 获取当前行的内容\n          console.log('curLine', curLine);\n          if (disabledLines.includes(i)) {\n            change.cancel();\n            break;\n          }\n        }\n      },\n      handleBeforeCursorEnter(editor, event) {\n        const cursor = editor.getCursor();\n        const line = editor.getLine(cursor.line);\n\n        if (line.match(/\\b\\/\\/.*$/)) {\n          console.log('进入了');\n          // 如果当前行以双斜杠开头（即包含单行注释），则取消光标进入该行的操作\n          event.preventDefault();\n        }\n      },\n\n      runCode() {\n        // this.previewComponent = { template: this.codecontent };\n        // // 使用 try-catch 来捕捉编译时可能出现的错误\n        // try {\n        //   eval(`(${this.codecontent})`);\n        //   this.data.push(Math.floor(Math.random() * 100));\n        // } catch (e) {\n        //   console.error(e);\n        // }\n        this.codeChange13(this.codecontent);\n      },\n      codeChange(content) {\n        console.log('compiler', compiler);\n        const { source, template, script, styles } = parseComponent(content);\n        console.log('解析出template、script、style', parseComponent(content));\n        const { render, staticRenderFns } = compile(template);\n        // const { render, staticRenderFns, options } = Vue.compile(content);\n        console.log('compile(template)', compile(template));\n        // console.log('render', Vue.compile(content));\n        // 使用Vue.extend创建一个组件构造器\n        const ComponentConstructor = Vue.extend({\n          render,\n          staticRenderFns\n        });\n\n        // 实例化一个组件，并挂载到DOM中\n        this.$nextTick(() => {\n          const instance = new ComponentConstructor();\n          instance.$mount('#preview');\n          // new ComponentConstructor().$mount('#preview');\n        });\n      },\n      codeChange2(content) {\n        // const { render, staticRenderFns } = compile(content);\n        // console.log('render', render);\n        const template = '<div>{{ message }}</div>';\n        const { render } = compile(template);\n        this.$nextTick(() => {\n          new Vue({\n            el: '#preview',\n            data: {\n              eleId: `eleId_${Math.random()\n                .toString()\n                .substring(3, 6) + Date.now().toString(36)}`,\n              message: 'Hello, Vue!'\n            },\n            render: render\n          });\n        });\n      },\n      codeChange3(content) {\n        const component = compileToFunctions(content);\n        const vm = new Vue({\n          render: component.render,\n          staticRenderFns: component.staticRenderFns\n        });\n        // this.$nextTick(() => {\n        //   const instance = new vm();\n        //   instance.$mount('#preview');\n        //   // new ComponentConstructor().$mount('#preview');\n        // });\n        this.$nextTick(() => {\n          this.compiledComponent = vm.$mount('#preview').$el.outerHTML;\n        });\n      },\n      codeChange4(content) {\n        const { source, template, script, styles } = parseComponent(content);\n        const { render, staticRenderFns } = compile(template);\n        const vm = new Vue({\n          render: render,\n          staticRenderFns: staticRenderFns\n        });\n        // this.$nextTick(() => {\n        //   const instance = new vm();\n        //   instance.$mount('#preview');\n        //   // new ComponentConstructor().$mount('#preview');\n        // });\n        this.$nextTick(() => {\n          this.compiledComponent = vm.$mount('#preview');\n        });\n      },\n      codeChange5(content) {\n        const compiled = compile(content);\n        new Vue({\n          render: h => h(compiled)\n        }).$mount('#preview');\n      },\n      codeChange6(content) {\n        console.log('compiler', compiler);\n        console.log('content', content);\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n\n        const compiled = compile(template.content);\n        const Component = createComponent(compiled, script.content);\n        console.log('Component', Component);\n\n        new Vue({\n          components: {\n            'preview-component': Component\n          },\n          template: `\n            <div>\n              <div v-html=\"styles\"></div>\n              <preview-component></preview-component>\n            </div>\n          `\n        }).$mount('#preview');\n      },\n      codeChange7(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n        const MyComponent = Vue.extend({\n          template: template,\n          // props: eval(`({ ${scriptCode.match(/props\\s*:\\s*({[\\s\\S]*})/)[1]} })`),\n          data() {\n            // 解析 scriptCode，返回组件的 data 对象\n            return eval(`({ ${script.content.match(/data\\s*\\(\\)\\s*{\\s*(\\S[\\s\\S]*\\S)\\s*}/)[1]} })`);\n          },\n          // methods: eval(`({ ${script.content.match(/methods\\s*:\\s*({[\\s\\S]*})/)[1]} })`),\n          style: eval(`({ ${styles} })`)\n        });\n\n        const vm = new MyComponent({\n          el: '#preview'\n        });\n      },\n      codeChange8(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n        const templateCode = template.content;\n        const compiledTemplate = Vue.compile(templateCode);\n\n        const scriptCode = script.content;\n        const scriptDataMatch = scriptCode.match(/data\\s*\\(\\)\\s*\\{\\s*return\\s*({[\\s\\S]*})\\s*\\}/);\n        const scriptMethodsMatch = scriptCode.match(/methods\\s*:\\s*({[\\s\\S]*})/);\n        const data = scriptDataMatch ? new Function(`return ${scriptDataMatch[1]}`)() : null;\n        const methods = scriptMethodsMatch ? new Function(`return ${scriptMethodsMatch[1]}`)() : null;\n\n        const styleCode = styles;\n\n        const componentObj = {\n          data,\n          methods,\n          render: compiledTemplate.render\n        };\n        if (styleCode) {\n          componentObj.styles = [styleCode];\n        }\n\n        const vm = new Vue({\n          el: '#app',\n          components: {\n            'my-component': componentObj\n          }\n        });\n      },\n      codeChange9(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n        let component = Vue.component('preview-component', options);\n        console.log('component', component);\n        let vm = new Vue(component).$mount();\n        console.log('vm', vm);\n        this.$nextTick(() => {\n          this.$refs.componentPreview.appendChild(vm.$el);\n        });\n      },\n      // 这个有一点改进1\n      codeChange10(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n\n        let component = Vue.extend({\n          template: options.template,\n          data() {\n            return {\n              eleId: `eleId_${Math.random()\n                .toString()\n                .substring(3, 6) + Date.now().toString(36)}`,\n              msg: 'hello'\n              // 在这里定义data选项\n            };\n          },\n          mounted() {\n            // this.$nextTick(() => {\n            //   this.initEchart();\n            // });\n            setTimeout(() => {\n              this.initEchart();\n            }, 2000);\n          },\n          methods: {\n            initEchart() {\n              console.log('eleId', this.eleId);\n              console.log('document.getElementById(this.eleId)', document.getElementById(this.eleId));\n              const echarts = this.$echart;\n              let myChart = echarts.init(document.getElementById(this.eleId));\n              const option = {\n                grid: {\n                  top: 0,\n                  bottom: 0,\n                  left: 0\n                },\n                xAxis: {\n                  type: 'category',\n                  data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\n                },\n                yAxis: {\n                  type: 'value'\n                },\n                series: [\n                  {\n                    data: [150, 230, 224, 218, 135, 147, 260],\n                    type: 'line'\n                  }\n                ]\n              };\n              myChart.setOption(option);\n              window.addEventListener('resize', () => {\n                myChart.resize();\n              });\n            }\n          }\n        });\n        let vm = new component().$mount();\n        console.log('vm', vm);\n        this.$nextTick(() => {\n          this.$refs.componentPreview.appendChild(vm.$el);\n        });\n      },\n      // 基于 codeChange10 改进\n      codeChange10A(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n\n        const dataRegExp = /data\\(\\)\\s*{\\s*return\\s*{\\s*(.*)\\s*};\\s*}/s;\n        const dataMatch = script.content.match(dataRegExp);\n        const dataContent = dataMatch ? dataMatch[1].trim() : '';\n        console.log('dataContent', dataContent);\n\n        // const methodsRegExp = /methods:\\s*{\\s*([\\s\\S]*?)\\s*}\\s*$/; // 解析的为空\n        // const methodsRegExp = /methods:\\s*{\\s*([\\s\\S]*?)\\s*}\\s*/; // 解析的只有部分内容？\n        // const methodsRegExp = /methods:\\s*{\\s*([\\s\\S]*?)\\s*}\\s*/; // 解析一部分\n        const methodsRegExp = /methods:\\s*{\\s*([\\s\\S]*?)\\s*}\\s*\\)/; // 少了末尾的 )}}，这个最接近了\n        // const methodsRegExp = /methods:\\s*{\\s*([\\s\\S]*?)\\s*}\\s*/;\n        const methodsMatch = script.content.match(methodsRegExp);\n        const methodsContent = methodsMatch ? methodsMatch[1].trim() : '';\n        console.log('methodsContent', methodsContent);\n\n        // 匹配 data() 函数体\n        // const dataMatch = script.content.trim().match(/data\\s*\\(\\s*\\)\\s*{\\s*return\\s*({[^]+})\\s*}\\s*/);\n        // console.log('dataMatch', dataMatch);\n        // const dataObj = dataMatch ? JSON.parse(dataMatch[1]) : {};\n        // console.log('dataObj', dataObj);\n\n        // 匹配 methods 函数体\n        // const methodsMatch = script.content.trim().match(/methods\\s*:\\s*{([^]+)}\\s*/);\n        // const methodsObj = methodsMatch ? eval(`({${methodsMatch[1]}})`) : {};\n        // console.log('methodsObj', methodsObj);\n\n        //\n\n        let component = Vue.extend({\n          template: options.template,\n          data() {\n            return {\n              dataContent\n            };\n          },\n          mounted() {\n            setTimeout(() => {\n              this.initEchart();\n            }, 2000);\n          },\n          methods: {\n            methodsContent\n          }\n        });\n        let vm = new component().$mount();\n        console.log('vm', vm);\n        this.$nextTick(() => {\n          this.$refs.componentPreview.appendChild(vm.$el);\n        });\n      },\n      codeChange10B(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n\n        const regex = /export default \\{([\\s\\S]*)\\};/;\n        const match = regex.exec(script.content);\n        const vueOptions = match[1];\n        console.log('vueOptions', vueOptions);\n        //\n        const str = 'export default { prop:{}}';\n        console.log('eval', eval(str));\n        console.log('vueOptions.props', vueOptions.props);\n        // console.log('JSON.parse(vueOptions)', JSON.parse(vueOptions));\n        // console.log('props', JSON.parse(vueOptions).props);\n\n        //\n\n        let component = Vue.extend({\n          template: options.template,\n          ...vueOptions\n        });\n        let vm = new component().$mount();\n        console.log('vm', vm);\n        this.$nextTick(() => {\n          this.$refs.componentPreview.appendChild(vm.$el);\n        });\n      },\n      codeChange10C(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n\n        // 将字符串解析为一个 Vue 组件构造函数\n        const componentCtor = Vue.extend({\n          template: script.content,\n          components: { echarts }\n        });\n        const root = new Vue({\n          el: '#app',\n          components: {\n            temp: componentCtor\n          },\n          template: '<temp/>'\n        });\n\n        const exportObj = root.$children[0].$options.exports.default;\n\n        console.log('exportObj', exportObj);\n\n        //\n\n        // let component = Vue.extend({\n        //   template: options.template,\n        //   ...vueOptions\n        // });\n        // let vm = new component().$mount();\n        // console.log('vm', vm);\n        // this.$nextTick(() => {\n        //   this.$refs.componentPreview.appendChild(vm.$el);\n        // });\n      },\n      codeChange10D(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n\n        const { props = {}, methods = {} } = script.attrs;\n        console.log('props:', props); // 输出解析出来的 props\n        console.log('methods:', methods); // 输出解析出来的 methods\n\n        // const reg = /initEchart\\(\\)\\s*{\\s*((?:.|\\s)*)}/;\n        // const matches = script.content.match(reg);\n        // console.log('matches[1]', matches[1]); // 输出 initEchart 方法的完整内容\n\n        // const regex = /initEchart\\s*\\(\\s*\\)\\s*\\{\\s*([\\s\\S]*)\\s*\\}/;\n        // const result = script.content.match(regex)[1];\n        // console.log('result', result);\n\n        // const reg = /initEchart\\s*\\(\\)\\s*{\\s*let myChart[^}]*}\\s*const option \\\\=\\s*{([^}]*)}/;\n        // const match = script.content.match(reg);\n        // const optionContent = match && match[1];\n        // console.log('optionContent,', optionContent);\n\n        const propsRegExp = /props:\\s*{([\\s\\S]*?)},/;\n        const initEchartRegExp = /methods:\\s*{([\\s\\S]*?)}/;\n\n        const propsMatch = script.content.match(propsRegExp)[1];\n        const initEchartMatch = script.content.match(initEchartRegExp);\n\n        if (propsMatch) {\n          console.log('propsMatch', propsMatch);\n          console.log('eval(`(${propsMatch})`)', new Function(`return ${propsMatch}`)());\n        }\n\n        if (initEchartMatch) {\n          console.log('initEchartMatch', initEchartMatch[1]);\n        }\n\n        const initEchartStr = `\n          const echarts = this.$echart;\n          let myChart = echarts.init(document.getElementById(this.eleId));\n          const option = {\n            grid: {\n              top: 0,\n              bottom: 0,\n              left: 0\n            },\n            xAxis: {\n              type: 'category',\n              data: this.echdata.xData\n            },\n            yAxis: {\n              type: 'value'\n            },\n            series: [\n              {\n                data: this.echdata.yData,\n                type: 'line'\n              }\n            ]\n          };\n          myChart.setOption(option);\n          window.addEventListener('resize', () => {\n            myChart.resize();\n          });\n        `;\n\n        let component = Vue.extend({\n          template: options.template,\n          props: eval(`(${propsMatch})`),\n          data() {\n            return {\n              eleId: `eleId_${Math.random()\n                .toString()\n                .substring(3, 6) + Date.now().toString(36)}`,\n              msg: 'hello'\n              // 在这里定义data选项\n            };\n          },\n          mounted() {\n            // this.$nextTick(() => {\n            //   this.initEchart();\n            // });\n            setTimeout(() => {\n              this.initEchart();\n            }, 2000);\n          },\n          methods: {\n            initEchart() {\n              eval(initEchartStr);\n            }\n          }\n        });\n        let vm = new component().$mount();\n        console.log('vm', vm);\n        this.$nextTick(() => {\n          this.$refs.componentPreview.appendChild(vm.$el);\n        });\n      },\n      codeChange10E(content) {\n        const { template, script, styles } = parseComponent(content);\n        console.log('parseComponent', parseComponent(content));\n        const { render, staticRenderFns } = compile(template.content);\n        console.log('template', compile(template.content));\n        console.log('script', compile(script.content));\n        let options = {\n          template: template.content,\n          script: script.content\n        };\n\n        let defaultEchdata = {} || [];\n        getdefaultEchdata();\n        function getdefaultEchdata() {\n          const regex = /\\/\\/tag1-start([\\s\\S]*?)\\/\\/tag1-end/;\n          const match = content.match(regex);\n\n          if (match) {\n            const res = match[1];\n            // console.log('内容2', res.trim());\n            const fooStr = `\n              function foo(){\n                ${res}\n                return defaultEchdata;\n              }\n            `;\n            // console.log(22, eval(res.trim()));\n            // console.log('2222', eval(`${res.trim()}`));\n            defaultEchdata = eval(`(${fooStr})`)();\n            // console.log(444, defaultEchdata);\n          } else {\n            alert('加载失败， 刷新页面后重试');\n          }\n        }\n\n        let initEchartStr = '';\n        getInitEchartFoo();\n        function getInitEchartFoo() {\n          const regex = /\\/\\/tag2-start([\\s\\S]*?)\\/\\/tag2-end/;\n          const match = content.match(regex);\n          if (match) {\n            const res = match[1];\n            console.log('tag2', res);\n            let myres = `\n              const echarts = this.$echart;\n              ${res.trim()}\n            `;\n            initEchartStr = myres;\n          } else {\n            alert('加载失败， 刷新页面后重试');\n          }\n        }\n\n        let component = Vue.extend({\n          template: template.content,\n          props: {\n            echdata: {\n              type: Object,\n              default: () => defaultEchdata\n            }\n          },\n          data() {\n            return {\n              eleId: `eleId_${Math.random()\n                .toString()\n                .substring(3, 6) + Date.now().toString(36)}`\n            };\n          },\n          mounted() {\n            // this.$nextTick(() => {\n            //   this.initEchart();\n            // });\n            setTimeout(() => {\n              this.initEchart();\n            }, 1000);\n          },\n          methods: {\n            initEchart() {\n              eval(initEchartStr);\n            }\n          }\n        });\n        let vm = new component().$mount();\n        // console.log('vm', vm);\n        this.$nextTick(() => {\n          this.$refs.componentPreview.innerHTML = '';\n          this.$refs.componentPreview.appendChild(vm.$el);\n        });\n      },\n      codeChange11(content) {\n        // const { template, script, styles } = parseComponent(content);\n        const parsedComponent = parseComponent(content);\n        const template = parsedComponent.template.content.trim();\n        const { render, staticRenderFns } = compile(template);\n        console.log('compile', compile);\n        this.previewComponent = new Vue({\n          render: h => h({ render, staticRenderFns })\n        }).$mount();\n      },\n      codeChange12(content) {\n        const res = compile(content);\n\n        // 定义组件名称，避免重名\n        const componentName = `preview-component-${Date.now()}`;\n        const componentCode = `${res.render.code};export default {name:'${componentName}'}`;\n        const component = Vue.component(componentName, {\n          render: new Function(componentCode)\n        });\n\n        // 返回组件构造函数\n        this.previewComponent = component;\n        // return component;\n      },\n      codeChange13(content) {\n        const { template, script, styles } = parseComponent(content);\n        const { render, staticRenderFns } = compile(template.content.trim());\n        const compOptions = {\n          render,\n          staticRenderFns\n        };\n\n        // 注册组件\n        Vue.component('dynamic-component', compOptions);\n      }\n      //\n    }\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .fullScreen-page {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 99;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.2);\n    background-color: #fff;\n    display: flex;\n    padding: 10px;\n    box-sizing: border-box;\n    // 左\n    .leftPanel {\n      flex: 1;\n      margin: 10px;\n      padding: 10px;\n      border: 1px solid #efeff5;\n      display: flex;\n      flex-direction: column;\n      .panelHeader {\n        display: flex;\n        justify-content: flex-end;\n        .btn {\n          margin-left: 15px;\n          padding: 6px 10px;\n          border: 1px solid #adb0b8;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: all 0.3s;\n          &:hover {\n            color: #5e7ce0;\n            border-color: #5e7ce0;\n          }\n        }\n      }\n      .codemirrorBox {\n        margin-top: 15px;\n        flex: 1;\n        overflow: auto;\n        // height: calc(100% - 40px);\n        ::v-deep .vue-codemirror {\n          height: 100%;\n        }\n        ::v-deep .CodeMirror {\n          height: 100%;\n        }\n      }\n    }\n    // 右\n    .rightPanel {\n      flex: 1;\n      margin: 10px;\n      padding: 10px;\n      border: 1px solid #efeff5;\n      .preview {\n        height: 100%;\n      }\n    }\n  }\n</style>\n\n<style>\n  .echart-unit {\n    height: 100%;\n  }\n</style>\n<style>\n  .disabled-line {\n    background-color: #f7f7f7 !important;\n    color: #ccc !important;\n    pointer-events: none !important;\n  }\n  .disabled-line-marker {\n    background-color: #ccc;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    margin-top: 2px;\n  }\n</style>\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isshow)?_c('section',{staticClass:\"fullScreen-page\"},[_c('aside',{staticClass:\"leftPanel\"},[_c('div',{staticClass:\"panelHeader\"},[_c('span',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$emit('update:isshow', false)}}},[_vm._v(\"关闭弹窗\")]),_c('span',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(_vm.mirror_code),expression:\"mirror_code\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:(_vm.clipboardSuccess),expression:\"clipboardSuccess\",arg:\"success\"}],staticClass:\"btn\"},[_vm._v(\"复制代码\")]),_c('span',{staticClass:\"btn\",on:{\"click\":_vm.runCode}},[_vm._v(\"运行代码\")])]),_c('div',{staticClass:\"codemirrorBox\"},[_c('codemirror',{ref:\"editor\",attrs:{\"id\":\"editor\",\"options\":_vm.options},on:{\"beforeChange\":_vm.beforeChange},model:{value:(_vm.mirror_code),callback:function ($$v) {_vm.mirror_code=$$v},expression:\"mirror_code\"}})],1)]),_c('main',{staticClass:\"rightPanel\"},[_c('div',{ref:\"componentPreview\",staticClass:\"previewBox\"},[_vm._v(\"预览2\")])])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4852915f&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4852915f&prod&lang=scss&scoped=true\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=4852915f&prod&lang=css\"\nimport style2 from \"./index.vue?vue&type=style&index=2&id=4852915f&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4852915f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"fullScreenPreviewPage\"},[_c('div',{staticClass:\"defSlot\"},[_vm._t(\"default\")],2),_c('div',{staticClass:\"footerBtns\"},[_c('span',{staticClass:\"btnicon\",on:{\"click\":function($event){return _vm.$emit('update:isshow', false)}}},[_vm._v(\"关闭\")]),_vm._t(\"btn\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--  -->\n<template>\n  <section class=\"fullScreenPreviewPage\">\n    <div class=\"defSlot\">\n      <slot></slot>\n    </div>\n    <div class=\"footerBtns\">\n      <span class=\"btnicon\" @click=\"$emit('update:isshow', false)\">关闭</span>\n      <slot name=\"btn\"></slot>\n    </div>\n  </section>\n</template>\n\n<script>\n  export default {\n    props: {\n      isshow: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {};\n    }\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .fullScreenPreviewPage {\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    // padding: 60px 120px;\n    @media screen and (max-width: 1199px) {\n      padding: 20px 60px;\n    }\n    @media screen and (min-width: 1200px) and (max-width: 1919px) {\n      padding: 40px 80px;\n    }\n    @media screen and (min-width: 1920px) {\n      padding: 60px 120px;\n    }\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    z-index: 99;\n    background-color: rgba(255, 255, 255, 1);\n    //\n    display: flex;\n    flex-direction: column;\n\n    .defSlot {\n      // height: 500px;\n      padding: 15px;\n      background-color: #051c4b;\n      flex: 1;\n      border-radius: 8px;\n    }\n\n    .footerBtns {\n      height: 90px;\n      text-align: center;\n      display: flex;\n      align-items: flex-end;\n      justify-content: center;\n      .btnicon {\n        display: inline-block;\n        padding: 10px 25px;\n        margin: 0 10px;\n        border-radius: 4px;\n        border: 1px solid #adb0b8;\n        transition: all 0.3s;\n        cursor: pointer;\n        font-size: 16px;\n        color: #444;\n        &:hover {\n          color: #5e7ce0;\n          border-color: #5e7ce0;\n        }\n        &:last-child {\n          background-color: #5e7ce0;\n          color: #fff;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=459172ec&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=459172ec&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"459172ec\",\n  null\n  \n)\n\nexport default component.exports","import 'codemirror/lib/codemirror.css';\n// require active-line.js\nimport 'codemirror/addon/selection/active-line.js';\n// styleSelectedText\nimport 'codemirror/addon/selection/mark-selection.js';\n// hint\nimport 'codemirror/addon/hint/show-hint.js';\nimport 'codemirror/addon/hint/sql-hint.js';\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/hint/javascript-hint.js';\n// highlightSelectionMatches\nimport 'codemirror/addon/scroll/annotatescrollbar.js';\nimport 'codemirror/addon/search/matchesonscrollbar.js';\nimport 'codemirror/addon/search/match-highlighter.js';\n// keyMap\nimport 'codemirror/mode/clike/clike.js';\nimport 'codemirror/mode/sql/sql.js';\nimport 'codemirror/addon/edit/matchbrackets.js';\nimport 'codemirror/addon/comment/comment.js';\nimport 'codemirror/addon/dialog/dialog.js';\nimport 'codemirror/addon/dialog/dialog.css';\nimport 'codemirror/addon/search/searchcursor.js';\nimport 'codemirror/addon/search/search.js';\nimport 'codemirror/keymap/sublime.js';\n// foldGutter\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/brace-fold.js';\nimport 'codemirror/addon/fold/comment-fold.js';\nimport 'codemirror/addon/fold/foldcode.js';\nimport 'codemirror/addon/fold/foldgutter.js';\nimport 'codemirror/addon/fold/indent-fold.js';\nimport 'codemirror/addon/fold/markdown-fold.js';\nimport 'codemirror/addon/fold/xml-fold.js';\n// 编辑的主题文件\nimport 'codemirror/theme/monokai.css';\nimport 'codemirror/theme/base16-light.css';\n\n// new\n// 代码括号自动补全\nimport 'codemirror/addon/edit/closebrackets.js';\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=83f4f712&prod&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isshow)?_c('section',{staticClass:\"fullScreen-page\"},[_c('aside',{staticClass:\"leftPanel\"},[_c('div',{staticClass:\"panelHeader\"},[_c('span',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$emit('update:isshow', false)}}},[_vm._v(\"关闭弹窗\")]),_c('span',{staticClass:\"btn\"},[_vm._v(\"复制代码\")]),_c('span',{staticClass:\"btn\",on:{\"click\":_vm.runCode}},[_vm._v(\"运行代码\")])]),_c('div',{staticClass:\"codemirrorBox\"},[_c('codemirror',{ref:\"editor\",attrs:{\"id\":\"editor\",\"options\":_vm.options},on:{\"beforeChange\":_vm.beforeChange,\"beforeCursorEnter\":_vm.handleBeforeCursorEnter},model:{value:(_vm.mirror_code),callback:function ($$v) {_vm.mirror_code=$$v},expression:\"mirror_code\"}})],1)]),_c('main',{staticClass:\"rightPanel\"},[_c('div',{attrs:{\"id\":\"preview\"}},[_vm._v(\"预览\")]),_c('div',{ref:\"componentPreview\",staticStyle:{\"height\":\"300px\"}},[_vm._v(\"预览2\")])])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=83f4f712&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=83f4f712&prod&lang=scss&scoped=true\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=83f4f712&prod&lang=css\"\nimport style2 from \"./index.vue?vue&type=style&index=2&id=83f4f712&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"83f4f712\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}